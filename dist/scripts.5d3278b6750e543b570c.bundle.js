"use strict";(function(){var r=this,e=function(r,e,n){var t={},o=!1,i=function(r){try{console.log("lzwCompress: "+(new Date).toISOString()+" : "+("object"==typeof r?e.stringify(r):r))}catch(r){}};return function(r,e,n){var t=[],u=function(r){return function(e){return e===r}},f=function(r,e){for(var n=0;n<r.length;n++)if(e(r[n]))return!0;return!1},c=function(r,e,n){f(r,n)||r.push(e)},a=function(r){if("object"==typeof r)for(var n in r)e.isArray(r)||c(t,n,u(n)),a(r[n])},s=function(r){if("object"!=typeof r)return r;for(var n in r)e.isArray(r)?r[n]=s(r[n]):r.hasOwnProperty(n)&&(r[t.indexOf(n)]=s(r[n]),delete r[n]);return r},p=function(r){if("object"!=typeof r)return r;for(var n in r)e.isArray(r)?r[n]=p(r[n]):r.hasOwnProperty(n)&&t[n]&&(r[t[n]]=p(r[n]),delete r[n]);return r},y=function(r){t=[];var e=n.parse(r);return a(e),o&&i("keys length : "+t.length),o&&i("keys        : "+t),n.stringify({__k:t,__v:s(e)})},l=function(r){var e=r;return"object"!=typeof e?r:e.hasOwnProperty("__k")?(t=e.__k,p(e.__v)):n.stringify(e)};r.KeyOptimize={pack:y,unpack:l}}(t,r,e),function(r,e){var n=function(r){if("string"!=typeof r)return r;var e,n,t,o={},i="",u=[],f=256;for(e=0;e<256;e+=1)o[String.fromCharCode(e)]=e;for(e=0;e<r.length;e+=1)if(n=r.charAt(e),t=i+n,o[t])i=t;else{if(void 0===o[i])return r;u.push(o[i]),o[t]=f++,i=String(n)}return""!==i&&u.push(o[i]),u},t=function(r){if(!e.isArray(r))return r;var n,t,o,i,u=[],f="",c=256;for(n=0;n<256;n+=1)u[n]=String.fromCharCode(n);for(t=String.fromCharCode(r[0]),o=t,n=1;n<r.length;n+=1){if(i=r[n],u[i])f=u[i];else{if(i!==c)return null;f=t+t.charAt(0)}o+=f,u[c++]=t+f.charAt(0),t=f}return o};r.LZWCompress={pack:n,unpack:t}}(t,r),{pack:function(r){if(o&&i("original (uncompressed) : "+r),!r||!0===r||r instanceof Date)return r;var n=r;"object"==typeof r&&(n=t.KeyOptimize.pack(e.stringify(r)),o&&i("key optimized: "+n));var u=t.LZWCompress.pack(n);return o&&i("packed   (compressed)   : "+u),u},unpack:function(r){if(o&&i("original (compressed)   : "+r),!r||!0===r||r instanceof Date)return r;var n,u=t.LZWCompress.unpack(r);try{n=e.parse(u)}catch(r){return o&&i("unpacked (uncompressed) : "+u),u}return"object"==typeof n&&(u=t.KeyOptimize.unpack(n)),o&&i("unpacked (uncompressed) : "+u),u},enableLogging:function(r){o=r}}}(Array,JSON);"undefined"!=typeof module&&module.exports?module.exports=e:r.lzwCompress=e}).call(this);